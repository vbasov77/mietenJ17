<div th:replace="~{layouts/header :: header(Edit_obj)}"/>
<link th:href="@{/css/dropzone/photos.css}" rel="stylesheet">
<link th:href="@{/css/checkbox.css}" rel="stylesheet">
<style th:inline="css">
    .preloader-img {
        display: none;
    }
</style>
<script th:inline="javascript">
    function in_array(value, Arr) {
        for (i = 0; i < Arr.length; i++) {
            if (value === Arr[i]) {
                return true;
            }
        }
        return false;
    }

    let id = [[${id}]]
    // Скрипт на <div id="countRooms"> в checkbox.js
    let countRooms = [[${countRooms}]]
</script>
<section>
    <div className="container px-4 px-lg-5">
        <div className="row gx-4 gx-lg-5 justify-content-center">
            <div className="col-lg-8">
                <h1 style="margin: 40px 0 60px 0">Редактировать объект</h1>
                <form id="form">
                    <div>
                        <h5>Заголовок:</h5>
                        <input name="title" type="text" th:value="${title}"
                               className="form-control"
                               placeholder="Заголовок" autoComplete="off" required>
                    </div>
                    <br>
                    <div>
                        <h5>Адрес:</h5>
                        <input name="address" type="text" th:value="${address}"
                               className="form-control" id="suggest"
                               placeholder="Адрес" autoComplete="off" readOnly>
                    </div>
                    <br>
                    <div>
                        <h5>Цена:</h5>
                        <input name="price" type="number" th:value="${price}"
                               className="form-control"
                               onKeyPress="return (event.charCode >= 48 && event.charCode <= 57 && /^\d{0,8}$/.test(this.value));"
                               placeholder="Цена" autoComplete="off" required>
                    </div>
                    <br>
                    <div>
                        <h5>Общая площадь:</h5>
                        <input id="area" name="area" type="text" th:value="${area}"
                               onKeyUp="return checkСommas(this);"
                               className="form-control"
                               placeholder="Общая площадь" autoComplete="off" required>
                    </div>
                    <br>
                    <div>
                        <h5>Этаж:</h5>
                        <input name="floor" type="number" th:value="${floor}"
                               onKeyPress="return (event.charCode >= 48 && event.charCode <= 57 && /^\d{0,3}$/.test(this.value));"
                               className="form-control"
                               placeholder="Этаж" autoComplete="off" required>
                    </div>
                    <br>
                    <div>
                        <h5>Этажей в доме:</h5>
                        <input name="floors" type="number" th:value="${floors}"
                               onKeyPress="return (event.charCode >= 48 && event.charCode <= 57 && /^\d{0,3}$/.test(this.value));"
                               className="form-control"
                               placeholder="Этажей в доме" autoComplete="off" required>
                    </div>
                    <br>
                    <div th:replace="~{/objects/blocks/balcony :: balcony(Edit_obj)}"/>
                    <br>
                    <div th:replace="~{/objects/blocks/parking :: parking(Edit_obj)}"/>
                    <br>
                    <div id="countRooms">
                        <h5>Количество комнат</h5>
                        <label className="checkbox-btn2">
                            <input type="checkbox" name="countRooms" id="rooms"
                                   value="студия">
                            <span>Студия</span>
                        </label>

                        <input id="count" name="countRooms" type="number"
                               th:value="${countRooms}"
                               className="form-control"
                               onKeyPress="return (event.charCode >= 48 && event.charCode <= 57 && /^\d{0,2}$/.test(this.value));"
                               placeholder="Количество комнат" autoComplete="off" required>

                    </div>
                    <br>
                    <div>
                        <h5>Вместимость человек:</h5>
                        <input name="capacity" type="number" th:value="${capacity}"
                               className="form-control"
                               onKeyPress="return (event.charCode >= 48 && event.charCode <= 57 && /^\d{0,3}$/.test(this.value));"
                               placeholder="Вместимость" autoComplete="off" required>
                    </div>
                    <br>
                    <div th:replace="~{/objects/blocks/service :: service(Edit_obj)}"/>
                    <br>
                    <div th:replace="~{/objects/blocks/comfort :: comfort(Edit_obj)}"/>
                    <br>
                    <div th:replace="~{/objects/blocks/internet :: internet(Edit_obj)}"/>
                    <br>
                    <div th:replace="~{/objects/blocks/rules :: rules(Edit_obj)}"/>
                    <br>
                    <h5>Текст:</h5>
                    <textarea className="form-control" placeholder="Введите текст..." name="textObj" id="text"
                              rows="5" cols="85" th:text="${text_obj}"></textarea><br>
                    <br>
                    <div>
                        <h5>Видео:</h5>
                        <input name="video" type="text" th:value="${video}"
                               className="form-control"
                               placeholder="https://www.youtube.com/embed/WviGn7gjhdw" autoComplete="off">
                    </div>
                    <br>
                    <div th:replace="~{/objects/blocks/images :: images(Edit_obj)}"/>
                    <br>
                    <br>
                    <div className="buttonsBlock">
                        <button className="btn btn-primary submit" id="submit" type="submit">Сохранить</button>
                        <a th:href='@{"/"}' type='button'
                           className='btn btn-success' style="margin: 5px">Просмотр</a>

                        <a onClick="return confirm('Подтвердите удаление!')"
                           th:href='@{"/"}' type='button'
                           className='btn btn-danger' style="margin: 5px">Удалить</a>
                        <img th:src="@{/images/loader/preloader.svg}" width="35px" height="auto" alt=""
                             className="preloader-img"/>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>


<script type="text/javascript" th:src="@{/js/dropzone/dropzone.min.js}"></script>

<link th:href="@{/css/dropzone/dropzone.min.css}" rel="stylesheet">


<script th:inline="javascript">
    if (countRooms === "студия") {
        document.getElementById('count').disabled = true;
    }
</script>

<script type="text/javascript" th:src="@{/js/dropzone/edit.js}"></script>
<script type="text/javascript" th:src="@{/js/checkbox/checkbox.js}"></script>
<script type="text/javascript" th:src="@{/js/checkСommas/checkСommas.js}"></script>

<div th:replace="~{layouts/footer :: footer(Edit_obj)}"/>



